
<div class="pt-1 px-4" *ngIf="diplomas?.length && !loading">
    <div class="row">
        <div class="col-md-5 col-sm-12">
            <p class="fs-5">Diplomas a generar: <span class="fw-bolder">{{diplomas.length}}</span></p>
        </div>
        <div class="col-md-7">
            <button class="btn btn-sm btn-primary float-end" (click)="generarDiplomas()" [disabled]="loading">Generar Diplomas</button>
        </div>
    </div>
    <hr>
    <div class="mb-4">
        <span>Detalle: </span>
        <div class="float-end">
            <button class="btn btn-light" (click)="hideOrShowAll(true)">Ocultar todo</button>
            <button class="btn btn-light" (click)="hideOrShowAll(false)">Expandir todo</button>
        </div>
    </div>
    <div class="row">
        <div *ngFor="let diploma of diplomas; index as i" class="col-xxl-4 col-xl-6 col-lg-6 col-md-6 col-sm-12 mb-2">
            <div class="mb-2 card">
                <div class="card-header px-1 pointer" (click)="toggleHidden(i)">
                    <button class="btn btn-link collapseButton" > <fa-icon [icon]="!diploma.hidden? caretUp : caretDown " ></fa-icon></button>
                    <span class="fw-bold">Diploma N°: {{i+1}} </span>
                    <span class="float-end px-2 registerCodeInHeader badge bg-secondary" > {{ diploma.registro }}</span>
                </div>
                <div class="form-group  card-body" *ngIf="!diploma.hidden" >
                    <div class="row">
                        <div class="col-md-8 col-sm-12">
                            <label [for]="'nombre'+i" class="mb-1" >Nombre</label>
                            <div [id]="'nombre'+i" class="form-control mb-2" >
                                {{ diploma.nombre }}
                            </div>
                        </div>
                        <div class="col-md-4 col-sm-12">
                            <label [for]="'rut'+i" class="mb-1">Rut</label>
                            <div [id]="'rut'+i" class="form-control mb-2" >
                                {{ diploma.rut }}
                            </div>
                        </div>
                        <div class="col-12">
                            <label [for]="'curso'+i" class="mb-1">Curso</label>
                            <div [id]="'curso'+i" class="form-control mb-2" >
                                {{ diploma.curso }}
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <label [for]="'duracion'+i" class="mb-1">Duración</label>
                            <div [id]="'duracion'+i" class="form-control mb-2" >
                                {{ diploma.duracion  }}
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <label [for]="'lugar'+i" class="mb-1">Lugar</label>
                            <div [id]="'lugar'+i" class="form-control mb-2" >
                                {{ diploma.lugar }}
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <label [for]="'fecha'+i" class="mb-1">Fecha</label>
                            <div [id]="'fecha'+i" class="form-control mb-2" >
                                {{ diploma.fecha | date: 'dd/MM/yyyy' }}
                            </div>
                        </div>

                        <div class="col-md-6 col-sm-12">
                            <label [for]="'firma_1'+i" class="mb-1 fw-bold">Firma 1</label>
                            <div [id]="'firma_1'+i" class="form-control mb-2" >
                                {{ diploma.firma_1 }}
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <label [for]="'firma_2'+i" class="mb-1 fw-bold">Firma 2</label>
                            <div [id]="'firma_2'+i" class="form-control mb-2"
                            >
                                {{ diploma.firma_2 }}
                            </div> 
                        </div>
                    
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 

<div *ngIf="loading && diplomas && diplomas.length">
    <app-loading [title]="'Generando diplomas...'"></app-loading>
</div>

 <ng-template #nodiplomas *ngIf="!diplomas || !diplomas.length">
    No hay diplomas para generar, compruebe que subió excel correcto
</ng-template>